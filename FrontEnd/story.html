<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sahaara - An Inspiring Story</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/framer-motion@latest/dist/framer-motion.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400&family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">

<style>
	html, body {
		width: 100%;
		overflow-x: hidden;
	}
	body {
		background-image: linear-gradient(rgba(238, 241, 245, 0.8), rgba(238, 241, 245, 0.95)), url(https://images.unsplash.com/photo-1481627834876-b7833e8f5570?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1528&q=80);
		background-size: cover;
		background-position: center;
		background-attachment: fixed;
	}
	.font-sans { font-family: 'Nunito', sans-serif; }
	.font-serif { font-family: 'Lora', serif; }
</style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">

const { useState, useEffect, useRef } = React;
const { motion } = Motion;

function Header({ onDecreaseFont, onIncreaseFont }) {
	return (
		<header className="w-full max-w-3xl mx-auto p-4 flex justify-between items-center">
			{/* Left Section: Back Button */}
			<a href="./Recommendations.html" className="p-2 rounded-full hover:bg-white/60 transition-colors" aria-label="Go back">
				<svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
					<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
				</svg>
			</a>
			
			{/* Center Section: Logo and Name */}
			<div className="flex items-center gap-3">
				<div className="w-10 h-10 bg-[#5a9482] rounded-lg flex items-center justify-center">
					<span className="text-white text-xl font-bold">Sa</span>
				</div>
				<h1 className="font-bold text-xl text-[#333333] font-sans">Sahaara</h1>
			</div>

			{/* Right Section: Reader Controls */}
			<div className="flex items-center gap-2 bg-white/60 backdrop-blur-md p-1 rounded-full shadow-sm">
				<button onClick={onDecreaseFont} className="w-8 h-8 rounded-full flex items-center justify-center text-gray-600 hover:bg-gray-200 transition-colors font-sans" aria-label="Decrease font size">A-</button>
				<button onClick={onIncreaseFont} className="w-8 h-8 rounded-full flex items-center justify-center text-gray-600 hover:bg-gray-200 transition-colors font-sans" aria-label="Increase font size">A+</button>
			</div>
		</header>
	);
}

function StoryPage() {
  const [fontSize, setFontSize] = useState(18);
  const [storyHeading, setStoryHeading] = useState(null);
  const [storyText, setStoryText] = useState(null);

  const increaseFont = () => setFontSize(prev => Math.min(prev + 2, 32));
  const decreaseFont = () => setFontSize(prev => Math.max(prev - 2, 14));

  useEffect(() => {
	const storedHeading = localStorage.getItem('currentStoryHeading');
	const storedText = localStorage.getItem('currentStoryText');
	if (storedHeading && storedText) {
	  setStoryHeading(storedHeading);
	  setStoryText(storedText);
	}
  }, []);

  const containerVariants = {
	hidden: { opacity: 0 },
	visible: { opacity: 1, transition: { staggerChildren: 0.3, delayChildren: 0.2 } }
  };

  const itemVariants = {
	hidden: { opacity: 0, y: 20 },
	visible: { opacity: 1, y: 0, transition: { duration: 0.6 } }
  };

  if (!storyHeading || !storyText) {
	return (
	  <div className="w-full min-h-screen flex items-center justify-center font-sans">
		<p>Loading your story...</p>
	  </div>
	);
  }

  return (
	<div className="w-full min-h-screen flex flex-col items-center font-sans relative z-0">
	  <Header onIncreaseFont={increaseFont} onDecreaseFont={decreaseFont} />
	  
	  <main className="w-full max-w-3xl mx-auto p-4 md:p-8 flex-grow flex items-center">
		<motion.div 
			className="w-full bg-white/80 backdrop-blur-lg p-8 sm:p-12 rounded-2xl shadow-lg"
			variants={containerVariants}
			initial="hidden"
			animate="visible"
		>
		  <motion.h2 variants={itemVariants} className="font-serif text-3xl md:text-4xl font-bold text-[#333333] text-center mb-6">
			{storyHeading}
		  </motion.h2>

		  <motion.div 
			variants={itemVariants} 
			className="font-serif text-gray-700 leading-relaxed space-y-4 transition-all duration-300"
			style={{ fontSize: `${fontSize}px` }}
		  >
			<p>
				{storyText}
			</p>
		  </motion.div>

		  <motion.p variants={itemVariants} className="text-center text-sm text-gray-500 mt-8 font-sans">
			✨ Generated for you by Saathi
		  </motion.p>
		</motion.div>
	  </main>
	</div>
  );
}

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<StoryPage />);

</script>
</body>
</html>